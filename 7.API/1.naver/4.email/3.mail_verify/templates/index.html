<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>회원가입이라고 치고 이메일만 검증하기</h2>
    <div>
        <label for="email">이메일:</label>
        <input type="email" id="email">
        <button onclick="sendCode()">인증코드 전송</button>
    </div>

    <div>
        <label for="code">인증코드:</label>
        <input type="text" id="code">
        <button onclick="verifyCode()">인증코드 확인</button>
    </div>

    <p id="result"><!--결과 출력할곳--></p>

    <script>
        // 미션1. email 주소 가져다가 서버로 보내기 (/send-code)
        async function sendCode() {
            const email = document.getElementById('email').value;
            const response = await fetch('/send-code', {
                method: 'POST',
                headers: {"Content-Type":"application/json"},
                body: JSON.stringify({ email })
            })

            // result 에다가 "메일 전송 성공/실패 여부 출력" (서버에서 받아와서...)
            const data = await response.json();
            document.getElementById('result').innerText = data.message || data.error;
        }

        // 미션2. code를 가져다가 서버로 보내기 (/verify-code)
        async function verifyCode() {
            const code = document.getElementById('code').value;
            const response = await fetch('/verify-code', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ code })
            })
            // result 에다가 "검증 코드 맞음/틀림 여부 출력" (서버에서 받아와서...)
            const data = await response.json();
            document.getElementById('result').innerText = data.message || data.error;
        }
    </script>
</body>
</html>
